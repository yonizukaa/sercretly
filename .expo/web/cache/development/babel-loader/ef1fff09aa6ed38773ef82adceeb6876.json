{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { collection, doc, onSnapshot, query, QuerySnapshot, where } from \"@firebase/firestore\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport React, { useContext, useEffect } from \"react\";\nimport { auth, db } from \"../firebase\";\nimport GlobalContext from \"../context/Context\";\nexport default function Chats() {\n  var currentUser = auth.currentUser;\n\n  var _useContext = useContext(GlobalContext),\n      rooms = _useContext.rooms,\n      setRooms = _useContext.setRooms;\n\n  var chatsQuery = query(collection(db, \"rooms\"), where(\"participantsArray\", \"array-contains\", currentUser.email));\n  useEffect(function () {\n    var unsubscribe = onSnapshot(chatsQuery, function (QuerySnapshot) {\n      var parsedChats = QuerySnapshot.docs.filter(function (doc) {\n        return doc.data().lastMessage;\n      }).map(function (doc) {\n        return _objectSpread(_objectSpread({}, doc.data()), {}, {\n          id: doc.id,\n          userB: doc.data().participants.find(function (p) {\n            return p.email == !currentUser.email;\n          })\n        });\n      });\n      setRooms(parsedChats);\n    });\n  }, []);\n  return React.createElement(View, null, React.createElement(Text, null, \"Chats\"));\n}","map":{"version":3,"names":["collection","doc","onSnapshot","query","QuerySnapshot","where","React","useContext","useEffect","auth","db","GlobalContext","Chats","currentUser","rooms","setRooms","chatsQuery","email","unsubscribe","parsedChats","docs","filter","data","lastMessage","map","id","userB","participants","find","p"],"sources":["C:/Users/johan/OneDrive/Bureau/Appmobile/Secretly/wp-clone-starter/screens/Chats.js"],"sourcesContent":["import {\r\n  collection,\r\n  doc,\r\n  onSnapshot,\r\n  query,\r\n  QuerySnapshot,\r\n  where,\r\n} from \"@firebase/firestore\";\r\nimport { View, Text } from \"react-native\";\r\nimport React, { useContext, useEffect } from \"react\";\r\nimport { auth, db } from \"../firebase\";\r\nimport GlobalContext from \"../context/Context\";\r\n\r\nexport default function Chats() {\r\n  const { currentUser } = auth;\r\n  const { rooms, setRooms } = useContext(GlobalContext);\r\n  const chatsQuery = query(\r\n    collection(db, \"rooms\"),\r\n    where(\"participantsArray\", \"array-contains\", currentUser.email)\r\n  );\r\n  useEffect(() => {\r\n    const unsubscribe = onSnapshot(chatsQuery, (QuerySnapshot) => {\r\n      const parsedChats = QuerySnapshot.docs\r\n        .filter((doc) => doc.data().lastMessage)\r\n        .map((doc) => ({\r\n          ...doc.data(),\r\n          id: doc.id,\r\n          userB: doc\r\n            .data()\r\n            .participants.find((p) => p.email == !currentUser.email),\r\n        }));\r\n      setRooms(parsedChats);\r\n    });\r\n  }, []);\r\n  return (\r\n    <View>\r\n      <Text>Chats</Text>\r\n    </View>\r\n  );\r\n}\r\n"],"mappings":";;;;;;AAAA,SACEA,UADF,EAEEC,GAFF,EAGEC,UAHF,EAIEC,KAJF,EAKEC,aALF,EAMEC,KANF,QAOO,qBAPP;;;AASA,OAAOC,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,QAA6C,OAA7C;AACA,SAASC,IAAT,EAAeC,EAAf;AACA,OAAOC,aAAP;AAEA,eAAe,SAASC,KAAT,GAAiB;EAC9B,IAAQC,WAAR,GAAwBJ,IAAxB,CAAQI,WAAR;;EACA,kBAA4BN,UAAU,CAACI,aAAD,CAAtC;EAAA,IAAQG,KAAR,eAAQA,KAAR;EAAA,IAAeC,QAAf,eAAeA,QAAf;;EACA,IAAMC,UAAU,GAAGb,KAAK,CACtBH,UAAU,CAACU,EAAD,EAAK,OAAL,CADY,EAEtBL,KAAK,CAAC,mBAAD,EAAsB,gBAAtB,EAAwCQ,WAAW,CAACI,KAApD,CAFiB,CAAxB;EAIAT,SAAS,CAAC,YAAM;IACd,IAAMU,WAAW,GAAGhB,UAAU,CAACc,UAAD,EAAa,UAACZ,aAAD,EAAmB;MAC5D,IAAMe,WAAW,GAAGf,aAAa,CAACgB,IAAd,CACjBC,MADiB,CACV,UAACpB,GAAD;QAAA,OAASA,GAAG,CAACqB,IAAJ,GAAWC,WAApB;MAAA,CADU,EAEjBC,GAFiB,CAEb,UAACvB,GAAD;QAAA,uCACAA,GAAG,CAACqB,IAAJ,EADA;UAEHG,EAAE,EAAExB,GAAG,CAACwB,EAFL;UAGHC,KAAK,EAAEzB,GAAG,CACPqB,IADI,GAEJK,YAFI,CAESC,IAFT,CAEc,UAACC,CAAD;YAAA,OAAOA,CAAC,CAACZ,KAAF,IAAW,CAACJ,WAAW,CAACI,KAA/B;UAAA,CAFd;QAHJ;MAAA,CAFa,CAApB;MASAF,QAAQ,CAACI,WAAD,CAAR;IACD,CAX6B,CAA9B;EAYD,CAbQ,EAaN,EAbM,CAAT;EAcA,OACE,oBAAC,IAAD,QACE,oBAAC,IAAD,gBADF,CADF;AAKD"},"metadata":{},"sourceType":"module"}