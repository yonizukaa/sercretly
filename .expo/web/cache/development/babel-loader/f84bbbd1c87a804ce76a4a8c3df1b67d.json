{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _excluded = [\"messages\", \"user\", \"inverted\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport LoadEarlier from \"./LoadEarlier\";\nimport Message from \"./Message\";\nimport Color from \"./Color\";\nimport { warning, StylePropType } from \"./utils\";\nimport TypingIndicator from \"./TypingIndicator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  containerAlignTop: {\n    flexDirection: 'row',\n    alignItems: 'flex-start'\n  },\n  contentContainerStyle: {\n    flexGrow: 1,\n    justifyContent: 'flex-start'\n  },\n  emptyChatContainer: {\n    flex: 1,\n    transform: [{\n      scaleY: -1\n    }]\n  },\n  headerWrapper: {\n    flex: 1\n  },\n  listStyle: {\n    flex: 1\n  },\n  scrollToBottomStyle: {\n    opacity: 0.8,\n    position: 'absolute',\n    right: 10,\n    bottom: 30,\n    zIndex: 999,\n    height: 40,\n    width: 40,\n    borderRadius: 20,\n    backgroundColor: Color.white,\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: Color.black,\n    shadowOpacity: 0.5,\n    shadowOffset: {\n      width: 0,\n      height: 0\n    },\n    shadowRadius: 1\n  }\n});\n\nvar MessageContainer = function (_React$PureComponent) {\n  _inherits(MessageContainer, _React$PureComponent);\n\n  var _super = _createSuper(MessageContainer);\n\n  function MessageContainer() {\n    var _this;\n\n    _classCallCheck(this, MessageContainer);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      showScrollBottom: false\n    };\n\n    _this.attachKeyboardListeners = function () {\n      var invertibleProps = _this.props.invertibleScrollViewProps;\n\n      if (invertibleProps) {\n        Keyboard.addListener('keyboardWillShow', invertibleProps.onKeyboardWillShow);\n        Keyboard.addListener('keyboardDidShow', invertibleProps.onKeyboardDidShow);\n        Keyboard.addListener('keyboardWillHide', invertibleProps.onKeyboardWillHide);\n        Keyboard.addListener('keyboardDidHide', invertibleProps.onKeyboardDidHide);\n      }\n    };\n\n    _this.detachKeyboardListeners = function () {\n      var invertibleProps = _this.props.invertibleScrollViewProps;\n      Keyboard.removeListener('keyboardWillShow', invertibleProps.onKeyboardWillShow);\n      Keyboard.removeListener('keyboardDidShow', invertibleProps.onKeyboardDidShow);\n      Keyboard.removeListener('keyboardWillHide', invertibleProps.onKeyboardWillHide);\n      Keyboard.removeListener('keyboardDidHide', invertibleProps.onKeyboardDidHide);\n    };\n\n    _this.renderTypingIndicator = function () {\n      if (Platform.OS === 'web') {\n        return null;\n      }\n\n      return _jsx(TypingIndicator, {\n        isTyping: _this.props.isTyping || false\n      });\n    };\n\n    _this.renderFooter = function () {\n      if (_this.props.renderFooter) {\n        return _this.props.renderFooter(_this.props);\n      }\n\n      return _this.renderTypingIndicator();\n    };\n\n    _this.renderLoadEarlier = function () {\n      if (_this.props.loadEarlier === true) {\n        var loadEarlierProps = _objectSpread({}, _this.props);\n\n        if (_this.props.renderLoadEarlier) {\n          return _this.props.renderLoadEarlier(loadEarlierProps);\n        }\n\n        return _jsx(LoadEarlier, _objectSpread({}, loadEarlierProps));\n      }\n\n      return null;\n    };\n\n    _this.scrollToBottom = function () {\n      var animated = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var inverted = _this.props.inverted;\n\n      if (inverted) {\n        _this.scrollTo({\n          offset: 0,\n          animated: animated\n        });\n      } else if (_this.props.forwardRef && _this.props.forwardRef.current) {\n        _this.props.forwardRef.current.scrollToEnd({\n          animated: animated\n        });\n      }\n    };\n\n    _this.handleOnScroll = function (event) {\n      var _event$nativeEvent = event.nativeEvent,\n          contentOffsetY = _event$nativeEvent.contentOffset.y,\n          contentSizeHeight = _event$nativeEvent.contentSize.height,\n          layoutMeasurementHeight = _event$nativeEvent.layoutMeasurement.height;\n      var scrollToBottomOffset = _this.props.scrollToBottomOffset;\n\n      if (_this.props.inverted) {\n        if (contentOffsetY > scrollToBottomOffset) {\n          _this.setState({\n            showScrollBottom: true\n          });\n        } else {\n          _this.setState({\n            showScrollBottom: false\n          });\n        }\n      } else {\n        if (contentOffsetY < scrollToBottomOffset && contentSizeHeight - layoutMeasurementHeight > scrollToBottomOffset) {\n          _this.setState({\n            showScrollBottom: true\n          });\n        } else {\n          _this.setState({\n            showScrollBottom: false\n          });\n        }\n      }\n    };\n\n    _this.renderRow = function (_ref) {\n      var item = _ref.item,\n          index = _ref.index;\n\n      if (!item._id && item._id !== 0) {\n        warning('GiftedChat: `_id` is missing for message', JSON.stringify(item));\n      }\n\n      if (!item.user) {\n        if (!item.system) {\n          warning('GiftedChat: `user` is missing for message', JSON.stringify(item));\n        }\n\n        item.user = {\n          _id: 0\n        };\n      }\n\n      var _this$props = _this.props,\n          messages = _this$props.messages,\n          user = _this$props.user,\n          inverted = _this$props.inverted,\n          restProps = _objectWithoutProperties(_this$props, _excluded);\n\n      if (messages && user) {\n        var previousMessage = (inverted ? messages[index + 1] : messages[index - 1]) || {};\n        var nextMessage = (inverted ? messages[index - 1] : messages[index + 1]) || {};\n\n        var messageProps = _objectSpread(_objectSpread({}, restProps), {}, {\n          user: user,\n          key: item._id,\n          currentMessage: item,\n          previousMessage: previousMessage,\n          inverted: inverted,\n          nextMessage: nextMessage,\n          position: item.user._id === user._id ? 'right' : 'left'\n        });\n\n        if (_this.props.renderMessage) {\n          return _this.props.renderMessage(messageProps);\n        }\n\n        return _jsx(Message, _objectSpread({}, messageProps));\n      }\n\n      return null;\n    };\n\n    _this.renderChatEmpty = function () {\n      if (_this.props.renderChatEmpty) {\n        return _this.props.inverted ? _this.props.renderChatEmpty() : _jsx(View, {\n          style: styles.emptyChatContainer,\n          children: _this.props.renderChatEmpty()\n        });\n      }\n\n      return _jsx(View, {\n        style: styles.container\n      });\n    };\n\n    _this.renderHeaderWrapper = function () {\n      return _jsx(View, {\n        style: styles.headerWrapper,\n        children: _this.renderLoadEarlier()\n      });\n    };\n\n    _this.onLayoutList = function () {\n      if (!_this.props.inverted && !!_this.props.messages && _this.props.messages.length) {\n        setTimeout(function () {\n          return _this.scrollToBottom && _this.scrollToBottom(false);\n        }, 15 * _this.props.messages.length);\n      }\n    };\n\n    _this.onEndReached = function (_ref2) {\n      var distanceFromEnd = _ref2.distanceFromEnd;\n      var _this$props2 = _this.props,\n          loadEarlier = _this$props2.loadEarlier,\n          onLoadEarlier = _this$props2.onLoadEarlier,\n          infiniteScroll = _this$props2.infiniteScroll,\n          isLoadingEarlier = _this$props2.isLoadingEarlier;\n\n      if (infiniteScroll && distanceFromEnd > 0 && distanceFromEnd <= 100 && loadEarlier && onLoadEarlier && !isLoadingEarlier && Platform.OS !== 'web') {\n        onLoadEarlier();\n      }\n    };\n\n    _this.keyExtractor = function (item) {\n      return \"\" + item._id;\n    };\n\n    return _this;\n  }\n\n  _createClass(MessageContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.messages && this.props.messages.length === 0) {\n        this.attachKeyboardListeners();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.detachKeyboardListeners();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.messages && prevProps.messages.length === 0 && this.props.messages && this.props.messages.length > 0) {\n        this.detachKeyboardListeners();\n      } else if (prevProps.messages && this.props.messages && prevProps.messages.length > 0 && this.props.messages.length === 0) {\n        this.attachKeyboardListeners();\n      }\n    }\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(options) {\n      if (this.props.forwardRef && this.props.forwardRef.current && options) {\n        this.props.forwardRef.current.scrollToOffset(options);\n      }\n    }\n  }, {\n    key: \"renderScrollBottomComponent\",\n    value: function renderScrollBottomComponent() {\n      var scrollToBottomComponent = this.props.scrollToBottomComponent;\n\n      if (scrollToBottomComponent) {\n        return scrollToBottomComponent();\n      }\n\n      return _jsx(Text, {\n        children: \"V\"\n      });\n    }\n  }, {\n    key: \"renderScrollToBottomWrapper\",\n    value: function renderScrollToBottomWrapper() {\n      var _this2 = this;\n\n      var propsStyle = this.props.scrollToBottomStyle || {};\n      return _jsx(View, {\n        style: [styles.scrollToBottomStyle, propsStyle],\n        children: _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return _this2.scrollToBottom();\n          },\n          hitSlop: {\n            top: 5,\n            left: 5,\n            right: 5,\n            bottom: 5\n          },\n          children: this.renderScrollBottomComponent()\n        })\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var inverted = this.props.inverted;\n      return _jsxs(View, {\n        style: this.props.alignTop ? styles.containerAlignTop : styles.container,\n        children: [this.state.showScrollBottom && this.props.scrollToBottom ? this.renderScrollToBottomWrapper() : null, _jsx(FlatList, _objectSpread(_objectSpread({\n          ref: this.props.forwardRef,\n          extraData: [this.props.extraData, this.props.isTyping],\n          keyExtractor: this.keyExtractor,\n          enableEmptySections: true,\n          automaticallyAdjustContentInsets: false,\n          inverted: inverted,\n          data: this.props.messages,\n          style: styles.listStyle,\n          contentContainerStyle: styles.contentContainerStyle,\n          renderItem: this.renderRow\n        }, this.props.invertibleScrollViewProps), {}, {\n          ListEmptyComponent: this.renderChatEmpty,\n          ListFooterComponent: inverted ? this.renderHeaderWrapper : this.renderFooter,\n          ListHeaderComponent: inverted ? this.renderFooter : this.renderHeaderWrapper,\n          onScroll: this.handleOnScroll,\n          scrollEventThrottle: 100,\n          onLayout: this.onLayoutList,\n          onEndReached: this.onEndReached,\n          onEndReachedThreshold: 0.1\n        }, this.props.listViewProps))]\n      });\n    }\n  }]);\n\n  return MessageContainer;\n}(React.PureComponent);\n\nexport { MessageContainer as default };\nMessageContainer.defaultProps = {\n  messages: [],\n  user: {},\n  isTyping: false,\n  renderChatEmpty: null,\n  renderFooter: null,\n  renderMessage: null,\n  onLoadEarlier: function onLoadEarlier() {},\n  onQuickReply: function onQuickReply() {},\n  inverted: true,\n  loadEarlier: false,\n  listViewProps: {},\n  invertibleScrollViewProps: {},\n  extraData: null,\n  scrollToBottom: false,\n  scrollToBottomOffset: 200,\n  alignTop: false,\n  scrollToBottomStyle: {},\n  infiniteScroll: false,\n  isLoadingEarlier: false\n};\nMessageContainer.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.object),\n  isTyping: PropTypes.bool,\n  user: PropTypes.object,\n  renderChatEmpty: PropTypes.func,\n  renderFooter: PropTypes.func,\n  renderMessage: PropTypes.func,\n  renderLoadEarlier: PropTypes.func,\n  onLoadEarlier: PropTypes.func,\n  listViewProps: PropTypes.object,\n  inverted: PropTypes.bool,\n  loadEarlier: PropTypes.bool,\n  invertibleScrollViewProps: PropTypes.object,\n  extraData: PropTypes.array,\n  scrollToBottom: PropTypes.bool,\n  scrollToBottomOffset: PropTypes.number,\n  scrollToBottomComponent: PropTypes.func,\n  alignTop: PropTypes.bool,\n  scrollToBottomStyle: StylePropType,\n  infiniteScroll: PropTypes.bool\n};","map":{"version":3,"mappings":"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","names":["PropTypes","React","LoadEarlier","Message","Color","warning","StylePropType","TypingIndicator","styles","StyleSheet","create","container","flex","containerAlignTop","flexDirection","alignItems","contentContainerStyle","flexGrow","justifyContent","emptyChatContainer","transform","scaleY","headerWrapper","listStyle","scrollToBottomStyle","opacity","position","right","bottom","zIndex","height","width","borderRadius","backgroundColor","white","shadowColor","black","shadowOpacity","shadowOffset","shadowRadius","MessageContainer","showScrollBottom","invertibleProps","props","invertibleScrollViewProps","Keyboard","addListener","onKeyboardWillShow","onKeyboardDidShow","onKeyboardWillHide","onKeyboardDidHide","removeListener","Platform","OS","isTyping","renderFooter","renderTypingIndicator","loadEarlier","loadEarlierProps","renderLoadEarlier","animated","inverted","scrollTo","offset","forwardRef","current","scrollToEnd","event","nativeEvent","contentOffsetY","contentOffset","y","contentSizeHeight","contentSize","layoutMeasurementHeight","layoutMeasurement","scrollToBottomOffset","setState","item","index","_id","JSON","stringify","user","system","messages","restProps","previousMessage","nextMessage","messageProps","key","currentMessage","renderMessage","renderChatEmpty","length","setTimeout","scrollToBottom","distanceFromEnd","onLoadEarlier","infiniteScroll","isLoadingEarlier","attachKeyboardListeners","detachKeyboardListeners","prevProps","options","scrollToOffset","scrollToBottomComponent","propsStyle","top","left","renderScrollBottomComponent","alignTop","state","renderScrollToBottomWrapper","extraData","keyExtractor","renderRow","renderHeaderWrapper","handleOnScroll","onLayoutList","onEndReached","listViewProps","PureComponent","onQuickReply","arrayOf","object","bool","func","array","number"],"sourceRoot":"","sources":["../src/MessageContainer.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}