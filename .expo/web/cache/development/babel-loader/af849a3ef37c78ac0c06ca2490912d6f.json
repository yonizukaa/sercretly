{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport React, { useContext, useEffect } from \"react\";\nimport useContacts from \"../hooks/useHooks\";\nimport GlobalContext from \"../context/Context\";\nimport { collection, onSnapshot, query, where } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport ListItem from \"../components/ListItem\";\nimport { useRoute } from \"@react-navigation/native\";\nexport default function Contacts() {\n  var contacts = useContacts();\n  var route = useRoute();\n  var image = route.params && route.params.image;\n  return React.createElement(FlatList, {\n    style: {\n      flex: 1,\n      padding: 10\n    },\n    data: contacts,\n    keyExtractor: function keyExtractor(_, i) {\n      return i;\n    },\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(ContactPreview, {\n        contact: item,\n        image: image\n      });\n    }\n  });\n}\n\nfunction ContactPreview(_ref2) {\n  var contact = _ref2.contact,\n      image = _ref2.image;\n\n  var _useContext = useContext(GlobalContext),\n      rooms = _useContext.rooms;\n\n  var _useState = useState(contact),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  useEffect(function () {\n    var q = query(collection(db, \"users\"), where(\"email\", \"===\", contact.email));\n    var unsubscribe = onSnapshot(q, function (snapshot) {\n      if (snapshot.docs.length) {\n        var userDoc = snapshot.docs[0].data();\n        setUser(function (prevUser) {\n          return _objectSpread(_objectSpread({}, prevUser), {}, {\n            userDoc: userDoc\n          });\n        });\n      }\n    });\n    return function () {\n      return unsubscribe();\n    };\n  }, []);\n  return React.createElement(ListItem, {\n    style: {\n      marginTop: 7\n    },\n    type: \"contacts\",\n    user: user,\n    image: image,\n    room: rooms.find(function (room) {\n      return rooms.participantsArray.includes(contact.email);\n    })\n  });\n}","map":{"version":3,"names":["React","useContext","useEffect","useContacts","GlobalContext","collection","onSnapshot","query","where","db","ListItem","useRoute","Contacts","contacts","route","image","params","flex","padding","_","i","item","ContactPreview","contact","rooms","useState","user","setUser","q","email","unsubscribe","snapshot","docs","length","userDoc","data","prevUser","marginTop","find","room","participantsArray","includes"],"sources":["C:/Users/johan/OneDrive/Bureau/Appmobile/Secretly/wp-clone-starter/screens/Contacts.js"],"sourcesContent":["import { View, Text, FlatList } from \"react-native\";\r\nimport React, { useContext, useEffect } from \"react\";\r\nimport useContacts from \"../hooks/useHooks\";\r\nimport GlobalContext from \"../context/Context\";\r\nimport { collection, onSnapshot, query, where } from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\nimport ListItem from \"../components/ListItem\";\r\nimport { useRoute } from \"@react-navigation/native\";\r\n\r\nexport default function Contacts() {\r\n  const contacts = useContacts();\r\n  const route = useRoute();\r\n  const image = route.params && route.params.image;\r\n  return (\r\n    <FlatList\r\n      style={{ flex: 1, padding: 10 }}\r\n      data={contacts}\r\n      keyExtractor={(_, i) => i}\r\n      renderItem={({ item }) => <ContactPreview contact={item} image={image} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction ContactPreview({ contact, image }) {\r\n  const { rooms } = useContext(GlobalContext);\r\n  const [user, setUser] = useState(contact);\r\n  useEffect(() => {\r\n    const q = query(\r\n      collection(db, \"users\"),\r\n      where(\"email\", \"===\", contact.email)\r\n    );\r\n    const unsubscribe = onSnapshot(q, (snapshot) => {\r\n      if (snapshot.docs.length) {\r\n        const userDoc = snapshot.docs[0].data();\r\n        setUser((prevUser) => ({ ...prevUser, userDoc }));\r\n      }\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n  return (\r\n    <ListItem\r\n      style={{ marginTop: 7 }}\r\n      type=\"contacts\"\r\n      user={user}\r\n      image={image}\r\n      room={rooms.find((room) =>\r\n        rooms.participantsArray.includes(contact.email)\r\n      )}\r\n    />\r\n  );\r\n}\r\n"],"mappings":";;;;;;;;;;AACA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,QAA6C,OAA7C;AACA,OAAOC,WAAP;AACA,OAAOC,aAAP;AACA,SAASC,UAAT,EAAqBC,UAArB,EAAiCC,KAAjC,EAAwCC,KAAxC,QAAqD,oBAArD;AACA,SAASC,EAAT;AACA,OAAOC,QAAP;AACA,SAASC,QAAT,QAAyB,0BAAzB;AAEA,eAAe,SAASC,QAAT,GAAoB;EACjC,IAAMC,QAAQ,GAAGV,WAAW,EAA5B;EACA,IAAMW,KAAK,GAAGH,QAAQ,EAAtB;EACA,IAAMI,KAAK,GAAGD,KAAK,CAACE,MAAN,IAAgBF,KAAK,CAACE,MAAN,CAAaD,KAA3C;EACA,OACE,oBAAC,QAAD;IACE,KAAK,EAAE;MAAEE,IAAI,EAAE,CAAR;MAAWC,OAAO,EAAE;IAApB,CADT;IAEE,IAAI,EAAEL,QAFR;IAGE,YAAY,EAAE,sBAACM,CAAD,EAAIC,CAAJ;MAAA,OAAUA,CAAV;IAAA,CAHhB;IAIE,UAAU,EAAE;MAAA,IAAGC,IAAH,QAAGA,IAAH;MAAA,OAAc,oBAAC,cAAD;QAAgB,OAAO,EAAEA,IAAzB;QAA+B,KAAK,EAAEN;MAAtC,EAAd;IAAA;EAJd,EADF;AAQD;;AAED,SAASO,cAAT,QAA4C;EAAA,IAAlBC,OAAkB,SAAlBA,OAAkB;EAAA,IAATR,KAAS,SAATA,KAAS;;EAC1C,kBAAkBd,UAAU,CAACG,aAAD,CAA5B;EAAA,IAAQoB,KAAR,eAAQA,KAAR;;EACA,gBAAwBC,QAAQ,CAACF,OAAD,CAAhC;EAAA;EAAA,IAAOG,IAAP;EAAA,IAAaC,OAAb;;EACAzB,SAAS,CAAC,YAAM;IACd,IAAM0B,CAAC,GAAGrB,KAAK,CACbF,UAAU,CAACI,EAAD,EAAK,OAAL,CADG,EAEbD,KAAK,CAAC,OAAD,EAAU,KAAV,EAAiBe,OAAO,CAACM,KAAzB,CAFQ,CAAf;IAIA,IAAMC,WAAW,GAAGxB,UAAU,CAACsB,CAAD,EAAI,UAACG,QAAD,EAAc;MAC9C,IAAIA,QAAQ,CAACC,IAAT,CAAcC,MAAlB,EAA0B;QACxB,IAAMC,OAAO,GAAGH,QAAQ,CAACC,IAAT,CAAc,CAAd,EAAiBG,IAAjB,EAAhB;QACAR,OAAO,CAAC,UAACS,QAAD;UAAA,uCAAoBA,QAApB;YAA8BF,OAAO,EAAPA;UAA9B;QAAA,CAAD,CAAP;MACD;IACF,CAL6B,CAA9B;IAMA,OAAO;MAAA,OAAMJ,WAAW,EAAjB;IAAA,CAAP;EACD,CAZQ,EAYN,EAZM,CAAT;EAaA,OACE,oBAAC,QAAD;IACE,KAAK,EAAE;MAAEO,SAAS,EAAE;IAAb,CADT;IAEE,IAAI,EAAC,UAFP;IAGE,IAAI,EAAEX,IAHR;IAIE,KAAK,EAAEX,KAJT;IAKE,IAAI,EAAES,KAAK,CAACc,IAAN,CAAW,UAACC,IAAD;MAAA,OACff,KAAK,CAACgB,iBAAN,CAAwBC,QAAxB,CAAiClB,OAAO,CAACM,KAAzC,CADe;IAAA,CAAX;EALR,EADF;AAWD"},"metadata":{},"sourceType":"module"}