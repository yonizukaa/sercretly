{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _excluded = [\"containerStyle\"],\n    _excluded2 = [\"containerStyle\"],\n    _excluded3 = [\"containerStyle\"],\n    _excluded4 = [\"containerStyle\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Avatar from \"./Avatar\";\nimport Bubble from \"./Bubble\";\nimport SystemMessage from \"./SystemMessage\";\nimport Day from \"./Day\";\nimport { StylePropType, isSameUser } from \"./utils\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar styles = {\n  left: StyleSheet.create({\n    container: {\n      flexDirection: 'row',\n      alignItems: 'flex-end',\n      justifyContent: 'flex-start',\n      marginLeft: 8,\n      marginRight: 0\n    }\n  }),\n  right: StyleSheet.create({\n    container: {\n      flexDirection: 'row',\n      alignItems: 'flex-end',\n      justifyContent: 'flex-end',\n      marginLeft: 0,\n      marginRight: 8\n    }\n  })\n};\n\nvar Message = function (_React$Component) {\n  _inherits(Message, _React$Component);\n\n  var _super = _createSuper(Message);\n\n  function Message() {\n    _classCallCheck(this, Message);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Message, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      var next = nextProps.currentMessage;\n      var current = this.props.currentMessage;\n      var _this$props = this.props,\n          previousMessage = _this$props.previousMessage,\n          nextMessage = _this$props.nextMessage;\n      var nextPropsMessage = nextProps.nextMessage;\n      var nextPropsPreviousMessage = nextProps.previousMessage;\n      var shouldUpdate = this.props.shouldUpdateMessage && this.props.shouldUpdateMessage(this.props, nextProps) || false;\n      return next.sent !== current.sent || next.received !== current.received || next.pending !== current.pending || next.createdAt !== current.createdAt || next.text !== current.text || next.image !== current.image || next.video !== current.video || next.audio !== current.audio || previousMessage !== nextPropsPreviousMessage || nextMessage !== nextPropsMessage || shouldUpdate;\n    }\n  }, {\n    key: \"renderDay\",\n    value: function renderDay() {\n      if (this.props.currentMessage && this.props.currentMessage.createdAt) {\n        var _this$props2 = this.props,\n            containerStyle = _this$props2.containerStyle,\n            props = _objectWithoutProperties(_this$props2, _excluded);\n\n        if (this.props.renderDay) {\n          return this.props.renderDay(props);\n        }\n\n        return _jsx(Day, _objectSpread({}, props));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderBubble\",\n    value: function renderBubble() {\n      var _this$props3 = this.props,\n          containerStyle = _this$props3.containerStyle,\n          props = _objectWithoutProperties(_this$props3, _excluded2);\n\n      if (this.props.renderBubble) {\n        return this.props.renderBubble(props);\n      }\n\n      return _jsx(Bubble, _objectSpread({}, props));\n    }\n  }, {\n    key: \"renderSystemMessage\",\n    value: function renderSystemMessage() {\n      var _this$props4 = this.props,\n          containerStyle = _this$props4.containerStyle,\n          props = _objectWithoutProperties(_this$props4, _excluded3);\n\n      if (this.props.renderSystemMessage) {\n        return this.props.renderSystemMessage(props);\n      }\n\n      return _jsx(SystemMessage, _objectSpread({}, props));\n    }\n  }, {\n    key: \"renderAvatar\",\n    value: function renderAvatar() {\n      var _this$props5 = this.props,\n          user = _this$props5.user,\n          currentMessage = _this$props5.currentMessage,\n          showUserAvatar = _this$props5.showUserAvatar;\n\n      if (user && user._id && currentMessage && currentMessage.user && user._id === currentMessage.user._id && !showUserAvatar) {\n        return null;\n      }\n\n      if (currentMessage && currentMessage.user && currentMessage.user.avatar === null) {\n        return null;\n      }\n\n      var _this$props6 = this.props,\n          containerStyle = _this$props6.containerStyle,\n          props = _objectWithoutProperties(_this$props6, _excluded4);\n\n      return _jsx(Avatar, _objectSpread({}, props));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props7 = this.props,\n          currentMessage = _this$props7.currentMessage,\n          nextMessage = _this$props7.nextMessage,\n          position = _this$props7.position,\n          containerStyle = _this$props7.containerStyle;\n\n      if (currentMessage) {\n        var sameUser = isSameUser(currentMessage, nextMessage);\n        return _jsxs(View, {\n          children: [this.renderDay(), currentMessage.system ? this.renderSystemMessage() : _jsxs(View, {\n            style: [styles[position].container, {\n              marginBottom: sameUser ? 2 : 10\n            }, !this.props.inverted && {\n              marginBottom: 2\n            }, containerStyle && containerStyle[position]],\n            children: [this.props.position === 'left' ? this.renderAvatar() : null, this.renderBubble(), this.props.position === 'right' ? this.renderAvatar() : null]\n          })]\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return Message;\n}(React.Component);\n\nexport { Message as default };\nMessage.defaultProps = {\n  renderAvatar: undefined,\n  renderBubble: null,\n  renderDay: null,\n  renderSystemMessage: null,\n  position: 'left',\n  currentMessage: {},\n  nextMessage: {},\n  previousMessage: {},\n  user: {},\n  containerStyle: {},\n  showUserAvatar: false,\n  inverted: true,\n  shouldUpdateMessage: undefined\n};\nMessage.propTypes = {\n  renderAvatar: PropTypes.func,\n  showUserAvatar: PropTypes.bool,\n  renderBubble: PropTypes.func,\n  renderDay: PropTypes.func,\n  renderSystemMessage: PropTypes.func,\n  position: PropTypes.oneOf(['left', 'right']),\n  currentMessage: PropTypes.object,\n  nextMessage: PropTypes.object,\n  previousMessage: PropTypes.object,\n  user: PropTypes.object,\n  inverted: PropTypes.bool,\n  containerStyle: PropTypes.shape({\n    left: StylePropType,\n    right: StylePropType\n  }),\n  shouldUpdateMessage: PropTypes.func\n};","map":{"version":3,"mappings":"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","names":["PropTypes","React","Avatar","Bubble","SystemMessage","Day","StylePropType","isSameUser","styles","left","StyleSheet","create","container","flexDirection","alignItems","justifyContent","marginLeft","marginRight","right","Message","nextProps","next","currentMessage","current","props","previousMessage","nextMessage","nextPropsMessage","nextPropsPreviousMessage","shouldUpdate","shouldUpdateMessage","sent","received","pending","createdAt","text","image","video","audio","containerStyle","renderDay","renderBubble","renderSystemMessage","user","showUserAvatar","_id","avatar","position","sameUser","system","marginBottom","inverted","renderAvatar","Component","undefined","func","bool","oneOf","object","shape"],"sourceRoot":"","sources":["../src/Message.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}